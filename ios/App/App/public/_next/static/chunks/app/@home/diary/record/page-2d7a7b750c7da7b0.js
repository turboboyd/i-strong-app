(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5068],{8651:function(e,r,n){Promise.resolve().then(n.bind(n,383))},2968:function(e,r,n){"use strict";n.d(r,{B3:function(){return m},OW:function(){return _},Vc:function(){return u},Xo:function(){return s},_K:function(){return f},os:function(){return d},s6:function(){return h}});var o=n(4642),t=n(568),a=n(2265),c=n(5520),i=n(9619);let d=(e,r)=>(0,c.Q)("users/diary/main/",{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(r)}}),s=(e,r,n)=>(0,c.Q)("users/diary/main/".concat(n,"/"),{method:"PUT",body:e,headers:{Authorization:"Bearer ".concat(r)}}),_=(e,r)=>(0,c.Q)("users/diary/main/".concat(e,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}}),u=e=>(0,o.a)({queryKey:["getDiaryRecords"],queryFn:()=>l(e)}),l=async e=>(0,c.Q)("users/diary/main/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),m=(e,r)=>(0,o.a)({queryKey:["getSingleDiaryRecord"],queryFn:()=>b(e,r),enabled:!1}),b=async(e,r)=>(0,c.Q)("users/diary/main/".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),h=(e,r,n)=>(0,o.a)({queryKey:["getRecordsByDate"],queryFn:()=>y(e,r,n),enabled:!1}),y=async(e,r,n)=>(0,c.Q)("users/diary/main/by-date/".concat(r,"/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),v=async(e,r)=>(console.log(r),(0,c.Q)("users/diary/check-password/",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:r})),f=()=>{let{user:e,handleChangeUserStore:r}=(0,i.LM)(),n=(0,i.LM)(e=>{var r;return null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.has_dairy_password}),[o,c]=(0,a.useState)(!1),d=(null==e?void 0:e.access_token)||"",{mutate:s,status:_}=(0,t.D)({mutationFn:e=>v(d,e),onSuccess:e=>{c(e)},onError:e=>{console.log("Error: ".concat(e.message))}});return{mutateCheckPinCode:s,status:_,passShow:n&&!o,isPinVerified:o,setIsPinVerified:c}}},383:function(e,r,n){"use strict";n.r(r),n.d(r,{DiaryRecordComponent:function(){return D},default:function(){return E}});var o=n(7437),t=n(7907),a=n(568),c=n(7473),i=n(9540),d=n(2759),s=n(2357),_=n(2045),u=n(4586),l=n(2151),m=n.n(l),b=n(2265),h=n(2670),y=n(2968),v=n(6583),f=n(130),x=n(3040),g=n.n(x);let j=[{color:"#BD3333"},{color:"#647DAD"},{color:"#B0C597"},{color:"#FFC75A"}];var p=e=>{let{editor:r}=e;return r?(0,o.jsxs)("div",{className:g().menu_bar,children:[(0,o.jsxs)("div",{className:g().menu_bar__top,children:[(0,o.jsx)("button",{onClick:()=>null==r?void 0:r.chain().focus().undo().run(),disabled:!(null==r?void 0:r.can().chain().focus().undo().run()),children:(0,o.jsx)(f.cO,{})}),(0,o.jsx)("button",{className:g().menu_bar__redo_btn,onClick:()=>r.chain().focus().redo().run(),disabled:!r.can().chain().focus().redo().run(),children:(0,o.jsx)(f.cO,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBold().run(),disabled:!r.can().chain().focus().toggleBold().run(),className:"".concat(r.isActive("bold")?"is-active":""," ").concat(g().menu_bar__bold_text),children:(0,o.jsx)(f.pF,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBulletList().run(),className:"".concat(r.isActive("bulletList")?"is-active":"","  ").concat(g().menu_bar__list),children:(0,o.jsx)(f.Zd,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().deleteSelection().run(),className:r.isActive("clearContent")?"is-active":"",children:(0,o.jsx)(f.kJ,{})})]}),(0,o.jsx)("div",{className:g().menu_bar__colors,children:j.map(e=>(0,o.jsx)("button",{style:{backgroundColor:e.color},onClick:()=>null==r?void 0:r.chain().focus().setColor(e.color).run(),className:"".concat((null==r?void 0:r.isActive("textStyle",{color:e.color}))?"is-active":""," ").concat(g().menu_bar__color_btn)},e.color))})]}):null},k=n(7386),C=n(9619),N=n(3190),A=n(9091),B=n.n(A);let D=()=>{var e,r;let n=(0,C.LM)(e=>{var r;return null===(r=e.user)||void 0===r?void 0:r.access_token}),{control:l,watch:x}=(0,h.cI)(),g=(0,t.useSearchParams)(),j=(0,t.useRouter)(),{data:A,refetch:D,status:E}=(0,y.B3)(null!=n?n:"",null!==(e=g.get("record_id"))&&void 0!==e?e:""),S=(0,_.jE)({content:"",extensions:[d.V.configure({placeholder:"Як ти?"}),c.I.configure({types:[s.Z.name,i.Z.name]}),s.Z.configure(),u.Z.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],editable:!0});(0,b.useEffect)(()=>{D()},[g.get("record_id")]),(0,b.useEffect)(()=>{var e;null==S||S.commands.setContent(null!==(e=null==A?void 0:A.note)&&void 0!==e?e:"")},[A,S]);let{mutate:z}=(0,a.D)({mutationFn:e=>(0,y.os)(e,null!=n?n:""),onSuccess:e=>{console.log(e,"data")}}),{mutate:L}=(0,a.D)({mutationFn:e=>{var r;return(0,y.Xo)(e,null!=n?n:"",null!==(r=g.get("record_id"))&&void 0!==r?r:"")},onSuccess:e=>{console.log(e,"data")}});return(0,o.jsxs)("section",{className:"".concat(B().diary_record," container"),children:[(0,o.jsxs)("div",{className:B().diary_record__fixed_menu,children:[(0,o.jsxs)("div",{className:B().diary_record__top,children:[(0,o.jsxs)("div",{className:B().diary_record__header,children:[(0,o.jsx)(k.r,{name:"back",onClick:()=>{j.back()},children:(0,o.jsx)(f.CC,{})}),(0,o.jsx)(v.r0,{size:"small",onClick:()=>{let e=x("title"),r=JSON.stringify(null==S?void 0:S.getHTML());g.get("record_id")?L({note:r,title:e||m()(null==A?void 0:A.created_at).format("dddd")}):z({note:r,title:e||m()(null==A?void 0:A.created_at).format("dddd")})},children:"Зберегти"})]}),(0,o.jsx)("div",{children:m()(null==A?void 0:A.created_at).format("DD.MM.YYYY")})]}),(0,o.jsx)(p,{editor:S})]}),"pending"!==E||A?(0,o.jsxs)("div",{className:B().diary_record__editor_box,children:[(0,o.jsx)(h.Qr,{control:l,name:"title",defaultValue:null!==(r=null==A?void 0:A.title)&&void 0!==r?r:"",render:e=>{let{field:{value:r,onChange:n}}=e;return(0,o.jsx)("input",{value:r,onChange:n,className:B().diary_record__title_input,placeholder:"Що сталося сьогодні? "})},rules:{required:N.C1,pattern:N.ES}},"title"),(0,o.jsx)(_.kg,{editor:S})]}):(0,o.jsx)("div",{children:"loading"})]})};var E=D},9091:function(e){e.exports={diary_record:"diary-record_diary_record__N_jDu",diary_record__fixed_menu:"diary-record_diary_record__fixed_menu__84zUz",diary_record__top:"diary-record_diary_record__top__vB_sS",diary_record__header:"diary-record_diary_record__header__04V_L",diary_record__editor_box:"diary-record_diary_record__editor_box__ayyIv",diary_record__title_input:"diary-record_diary_record__title_input__qzKkR"}},3040:function(e){e.exports={menu_bar:"menu-bar_menu_bar__WPfCR",menu_bar__top:"menu-bar_menu_bar__top__t1aK0",menu_bar__colors:"menu-bar_menu_bar__colors__WeWGJ",menu_bar__redo_btn:"menu-bar_menu_bar__redo_btn__DwoNb",menu_bar__bold_text:"menu-bar_menu_bar__bold_text__2w3h3",menu_bar__list:"menu-bar_menu_bar__list__t6YNu",menu_bar__color_btn:"menu-bar_menu_bar__color_btn__s5AxH"}}},function(e){e.O(0,[6990,3572,7902,109,2537,9831,130,7883,2971,8069,1744],function(){return e(e.s=8651)}),_N_E=e.O()}]);