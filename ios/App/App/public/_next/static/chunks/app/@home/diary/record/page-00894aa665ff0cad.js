(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5068],{4966:function(e,r,n){Promise.resolve().then(n.bind(n,1309))},2968:function(e,r,n){"use strict";n.d(r,{B3:function(){return m},OW:function(){return _},Vc:function(){return u},Xo:function(){return s},_K:function(){return f},os:function(){return d},s6:function(){return h}});var o=n(4642),t=n(568),a=n(2265),c=n(5520),i=n(9619);let d=(e,r)=>(0,c.Q)("users/diary/main/",{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(r)}}),s=(e,r,n)=>(0,c.Q)("users/diary/main/".concat(n,"/"),{method:"PUT",body:e,headers:{Authorization:"Bearer ".concat(r)}}),_=(e,r)=>(0,c.Q)("users/diary/main/".concat(e,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}}),u=e=>(0,o.a)({queryKey:["getDiaryRecords"],queryFn:()=>l(e)}),l=async e=>(0,c.Q)("users/diary/main/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),m=(e,r)=>(0,o.a)({queryKey:["getSingleDiaryRecord"],queryFn:()=>b(e,r),enabled:!1}),b=async(e,r)=>(0,c.Q)("users/diary/main/".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),h=(e,r,n)=>(0,o.a)({queryKey:["getRecordsByDate"],queryFn:()=>y(e,r,n),enabled:!1}),y=async(e,r,n)=>(0,c.Q)("users/diary/main/by-date/".concat(r,"/").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),v=async(e,r)=>(0,c.Q)("users/diary/check-password/",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:r}),f=()=>{let{user:e}=(0,i.LM)(),r=(0,i.LM)(e=>{var r;return null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.has_dairy_password}),[n,o]=(0,a.useState)(!1),c=(null==e?void 0:e.access_token)||"",{mutate:d,status:s}=(0,t.D)({mutationFn:e=>v(c,e),onSuccess:e=>{o(e)},onError:e=>{console.log("Error: ".concat(e.message))}});return{mutateCheckPinCode:d,status:s,passShow:r&&!n,isPinVerified:n,setIsPinVerified:o}}},1309:function(e,r,n){"use strict";n.r(r),n.d(r,{DiaryRecordComponent:function(){return N}});var o=n(7437),t=n(7907),a=n(568),c=n(7473),i=n(9540),d=n(2759),s=n(2357),_=n(7181),u=n(4586),l=n(2151),m=n.n(l),b=n(2265),h=n(2670),y=n(2968),v=n(6583),f=n(6633),x=n(7386),j=n(130),p=n(9619),k=n(3190),g=n(9091),C=n.n(g);let N=()=>{var e,r;let n=(0,p.LM)(e=>{var r;return null===(r=e.user)||void 0===r?void 0:r.access_token}),{control:l,watch:g}=(0,h.cI)(),N=(0,t.useSearchParams)(),A=(0,t.useRouter)(),{data:B,refetch:D,status:E}=(0,y.B3)(null!=n?n:"",null!==(e=N.get("record_id"))&&void 0!==e?e:""),S=(0,_.jE)({content:"",extensions:[d.V.configure({placeholder:"Як ти?"}),c.I.configure({types:[s.Z.name,i.Z.name]}),s.Z.configure(),u.Z.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],editable:!0});(0,b.useEffect)(()=>{D()},[N.get("record_id")]),(0,b.useEffect)(()=>{var e;null==S||S.commands.setContent(null!==(e=null==B?void 0:B.note)&&void 0!==e?e:"")},[B,S]);let{mutate:z}=(0,a.D)({mutationFn:e=>(0,y.os)(e,null!=n?n:""),onSuccess:e=>{A.back()}}),{mutate:L}=(0,a.D)({mutationFn:e=>{var r;return(0,y.Xo)(e,null!=n?n:"",null!==(r=N.get("record_id"))&&void 0!==r?r:"")},onSuccess:e=>{A.back()}});return(0,o.jsxs)("section",{className:"".concat(C().diary_record," container"),children:[(0,o.jsxs)("div",{className:C().diary_record__fixed_menu,children:[(0,o.jsxs)("div",{className:C().diary_record__top,children:[(0,o.jsxs)("div",{className:C().diary_record__header,children:[(0,o.jsx)(x.r,{name:"back",onClick:()=>{A.back()},children:(0,o.jsx)(j.CC,{})}),(0,o.jsx)(v.r0,{size:"small",onClick:()=>{let e=g("title"),r=JSON.stringify(null==S?void 0:S.getHTML());N.get("record_id")?L({note:r,title:e||m()(null==B?void 0:B.created_at).format("dddd")}):z({note:r,title:e||m()(null==B?void 0:B.created_at).format("dddd")})},children:"Зберегти"})]}),(0,o.jsx)("div",{children:m()(null==B?void 0:B.created_at).format("DD.MM.YYYY")})]}),(0,o.jsx)(f.e,{editor:S})]}),"pending"!==E||B?(0,o.jsxs)("div",{className:C().diary_record__editor_box,children:[(0,o.jsx)(h.Qr,{control:l,name:"title",defaultValue:null!==(r=null==B?void 0:B.title)&&void 0!==r?r:"",render:e=>{let{field:{value:r,onChange:n}}=e;return(0,o.jsx)("input",{value:r,onChange:n,className:C().diary_record__title_input,placeholder:"Що сталося сьогодні? "})},rules:{required:k.C1,pattern:k.ES}},"title"),(0,o.jsx)(_.kg,{editor:S})]}):(0,o.jsx)("div",{children:"Завантаження"})]})};r.default=N},6633:function(e,r,n){"use strict";n.d(r,{e:function(){return d}});var o=n(7437);n(2265);var t=n(130),a=n(3040),c=n.n(a);let i=[{color:"#BD3333"},{color:"#647DAD"},{color:"#B0C597"},{color:"#FFC75A"}];var d=e=>{let{editor:r}=e;return r?(0,o.jsxs)("div",{className:c().menu_bar,children:[(0,o.jsxs)("div",{className:c().menu_bar__top,children:[(0,o.jsx)("button",{onClick:()=>null==r?void 0:r.chain().focus().undo().run(),disabled:!(null==r?void 0:r.can().chain().focus().undo().run()),children:(0,o.jsx)(t.cO,{})}),(0,o.jsx)("button",{className:c().menu_bar__redo_btn,onClick:()=>r.chain().focus().redo().run(),disabled:!r.can().chain().focus().redo().run(),children:(0,o.jsx)(t.cO,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBold().run(),disabled:!r.can().chain().focus().toggleBold().run(),className:"".concat(r.isActive("bold")?"is-active":""," ").concat(c().menu_bar__bold_text),children:(0,o.jsx)(t.pF,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBulletList().run(),className:"".concat(r.isActive("bulletList")?"is-active":"","  ").concat(c().menu_bar__list),children:(0,o.jsx)(t.Zd,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().deleteSelection().run(),className:r.isActive("clearContent")?"is-active":"",children:(0,o.jsx)(t.kJ,{})})]}),(0,o.jsx)("div",{className:c().menu_bar__colors,children:i.map(e=>(0,o.jsx)("button",{style:{backgroundColor:e.color},onClick:()=>null==r?void 0:r.chain().focus().setColor(e.color).run(),className:"".concat((null==r?void 0:r.isActive("textStyle",{color:e.color}))?"is-active":""," ").concat(c().menu_bar__color_btn)},e.color))})]}):null}},9091:function(e){e.exports={diary_record:"diary-record_diary_record__N_jDu",diary_record__fixed_menu:"diary-record_diary_record__fixed_menu__84zUz",diary_record__top:"diary-record_diary_record__top__vB_sS",diary_record__header:"diary-record_diary_record__header__04V_L",diary_record__editor_box:"diary-record_diary_record__editor_box__ayyIv",diary_record__title_input:"diary-record_diary_record__title_input__qzKkR"}},3040:function(e){e.exports={menu_bar:"menu-bar_menu_bar__WPfCR",menu_bar__top:"menu-bar_menu_bar__top__t1aK0",menu_bar__colors:"menu-bar_menu_bar__colors__WeWGJ",menu_bar__redo_btn:"menu-bar_menu_bar__redo_btn__DwoNb",menu_bar__bold_text:"menu-bar_menu_bar__bold_text__2w3h3",menu_bar__list:"menu-bar_menu_bar__list__t6YNu",menu_bar__color_btn:"menu-bar_menu_bar__color_btn__s5AxH"}}},function(e){e.O(0,[6990,3572,7902,4382,2537,9831,130,7883,2971,8069,1744],function(){return e(e.s=4966)}),_N_E=e.O()}]);