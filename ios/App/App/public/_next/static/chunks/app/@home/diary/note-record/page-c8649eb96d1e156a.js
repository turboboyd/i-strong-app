(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6277],{3753:function(e,r,n){Promise.resolve().then(n.bind(n,3713))},60:function(e,r,n){"use strict";n.d(r,{$3:function(){return c},J7:function(){return d},Yx:function(){return _},pg:function(){return s}});var o=n(4642),t=n(5520);let c=e=>(0,o.a)({queryKey:["getNotes"],queryFn:()=>a(e)}),a=async e=>(0,t.Q)("users/diary/notes/",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),_=(e,r)=>(0,o.a)({queryKey:["getAllNotesByChallenge"],queryFn:()=>i(e,r),enabled:!1}),i=async(e,r)=>(0,t.Q)("users/diary/notes/by-challenge/".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),d=(e,r)=>(0,o.a)({queryKey:["getSingleNoteRecord"],queryFn:()=>l(e,r),enabled:!1}),l=async(e,r)=>(0,t.Q)("users/diary/notes/".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),s=(e,r,n)=>(0,t.Q)("users/diary/notes/".concat(n,"/"),{method:"PUT",body:e,headers:{Authorization:"Bearer ".concat(r)}})},3713:function(e,r,n){"use strict";n.r(r),n.d(r,{NoteRecordComponent:function(){return C}});var o=n(7437),t=n(7907),c=n(568),a=n(7473),_=n(9540),i=n(2759),d=n(2357),l=n(7181),s=n(4586),u=n(2151),b=n.n(u),m=n(2265),h=n(2670),f=n(60),v=n(6583),x=n(6633),y=n(7386),j=n(130),p=n(9619),g=n(3190),k=n(8974),N=n.n(k);let C=()=>{var e,r;let n=(0,p.LM)(e=>{var r;return null===(r=e.user)||void 0===r?void 0:r.access_token}),{control:u,watch:k}=(0,h.cI)(),C=(0,t.useSearchParams)(),A=(0,t.useRouter)(),{data:B,refetch:E,status:q}=(0,f.J7)(null!=n?n:"",null!==(e=C.get("record_id"))&&void 0!==e?e:""),D=(0,l.jE)({content:"",extensions:[i.V.configure({placeholder:"Як ти?"}),a.I.configure({types:[d.Z.name,_.Z.name]}),d.Z.configure(),s.Z.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],editable:!0});(0,m.useEffect)(()=>{E()},[C.get("record_id")]),(0,m.useEffect)(()=>{var e;null==D||D.commands.setContent(null!==(e=null==B?void 0:B.note)&&void 0!==e?e:"")},[B,D]);let{mutate:F}=(0,c.D)({mutationFn:e=>{var r;return(0,f.pg)(e,null!=n?n:"",null!==(r=C.get("record_id"))&&void 0!==r?r:"")},onSuccess:e=>{A.back()}});return(0,o.jsxs)("section",{className:"".concat(N().diary_record," container"),children:[(0,o.jsxs)("div",{className:N().diary_record__fixed_menu,children:[(0,o.jsxs)("div",{className:N().diary_record__top,children:[(0,o.jsxs)("div",{className:N().diary_record__header,children:[(0,o.jsx)(y.r,{name:"back",onClick:()=>{A.back()},children:(0,o.jsx)(j.CC,{})}),(0,o.jsx)(v.r0,{size:"small",onClick:()=>{let e=k("title");F({note:JSON.stringify(null==D?void 0:D.getHTML()),title:e||b()(null==B?void 0:B.created_at).format("dddd")})},children:"Зберегти"})]}),(0,o.jsx)("div",{children:b()(null==B?void 0:B.created_at).format("DD.MM.YYYY")})]}),(0,o.jsx)(x.e,{editor:D})]}),"pending"!==q||B?(0,o.jsxs)("div",{className:N().diary_record__editor_box,children:[(0,o.jsx)(h.Qr,{control:u,name:"title",defaultValue:null!==(r=null==B?void 0:B.title)&&void 0!==r?r:"",render:e=>{let{field:{value:r,onChange:n}}=e;return(0,o.jsx)("input",{value:r,onChange:n,className:N().diary_record__title_input,placeholder:"Що сталося сьогодні? "})},rules:{required:g.C1,pattern:g.ES}},"title"),(0,o.jsx)(l.kg,{editor:D})]}):(0,o.jsx)("div",{children:"Завантаження"})]})};r.default=C},6633:function(e,r,n){"use strict";n.d(r,{e:function(){return i}});var o=n(7437);n(2265);var t=n(130),c=n(3040),a=n.n(c);let _=[{color:"#BD3333"},{color:"#647DAD"},{color:"#B0C597"},{color:"#FFC75A"}];var i=e=>{let{editor:r}=e;return r?(0,o.jsxs)("div",{className:a().menu_bar,children:[(0,o.jsxs)("div",{className:a().menu_bar__top,children:[(0,o.jsx)("button",{onClick:()=>null==r?void 0:r.chain().focus().undo().run(),disabled:!(null==r?void 0:r.can().chain().focus().undo().run()),children:(0,o.jsx)(t.cO,{})}),(0,o.jsx)("button",{className:a().menu_bar__redo_btn,onClick:()=>r.chain().focus().redo().run(),disabled:!r.can().chain().focus().redo().run(),children:(0,o.jsx)(t.cO,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBold().run(),disabled:!r.can().chain().focus().toggleBold().run(),className:"".concat(r.isActive("bold")?"is-active":""," ").concat(a().menu_bar__bold_text),children:(0,o.jsx)(t.pF,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().toggleBulletList().run(),className:"".concat(r.isActive("bulletList")?"is-active":"","  ").concat(a().menu_bar__list),children:(0,o.jsx)(t.Zd,{})}),(0,o.jsx)("button",{onClick:()=>r.chain().focus().deleteSelection().run(),className:r.isActive("clearContent")?"is-active":"",children:(0,o.jsx)(t.kJ,{})})]}),(0,o.jsx)("div",{className:a().menu_bar__colors,children:_.map(e=>(0,o.jsx)("button",{style:{backgroundColor:e.color},onClick:()=>null==r?void 0:r.chain().focus().setColor(e.color).run(),className:"".concat((null==r?void 0:r.isActive("textStyle",{color:e.color}))?"is-active":""," ").concat(a().menu_bar__color_btn)},e.color))})]}):null}},8974:function(e){e.exports={diary_record:"note-record_diary_record__4lIY_",diary_record__fixed_menu:"note-record_diary_record__fixed_menu__PB7s_",diary_record__top:"note-record_diary_record__top__xKMlX",diary_record__header:"note-record_diary_record__header__7OhvP",diary_record__editor_box:"note-record_diary_record__editor_box__Tg0q_",diary_record__title_input:"note-record_diary_record__title_input__ItT1z"}},3040:function(e){e.exports={menu_bar:"menu-bar_menu_bar__WPfCR",menu_bar__top:"menu-bar_menu_bar__top__t1aK0",menu_bar__colors:"menu-bar_menu_bar__colors__WeWGJ",menu_bar__redo_btn:"menu-bar_menu_bar__redo_btn__DwoNb",menu_bar__bold_text:"menu-bar_menu_bar__bold_text__2w3h3",menu_bar__list:"menu-bar_menu_bar__list__t6YNu",menu_bar__color_btn:"menu-bar_menu_bar__color_btn__s5AxH"}}},function(e){e.O(0,[6990,3572,7902,4382,2537,9831,130,7883,2971,8069,1744],function(){return e(e.s=3753)}),_N_E=e.O()}]);